--# mysql --local-infile -u root 
--LOAD DATA LOCAL INFILE '/home/guillaume/cc.csv' INTO TABLE comcom FIELDS TERMINATED
--BY ';'LINE TERMINATED BY '\n\r'; 
--mysqldump -u root -p SLL_MDE > backupDBMDE.sql

create database SLL_CPS_23; 
--default character set utf8 ?

use SLL_CPS_23;

--alter table bib rename column cc to ccId;
--is this table really of use? cant i merge it with coordonnees?
create table if not exists bib (
    bibId smallint primary key not null auto_increment,
    bibCode int,
    inseeCode int,
    ville varchar(150),
    ccId smallint,
    -- 0 non transféré/1 transféré/2 associative
    transfert smallint);

create table if not exists cc (
    ccId smallint not null primary key auto_increment,
    nom varchar (100),
    nomComplet varchar(200),
    tad varchar(5),
    rural tinyint);

create table if not exists code_ua(
    code varchar(50) primary key not_null,
    def text);

--update coordonnees2021 join bib on bib.bibId=coordonnees2021.bibId set coordonnees2021.ccId=bib.cc;
--insert into does not work…
--update coordonnees2020 c join bib b on c.bibId=b.bibId set c.inseeCode=b.inseeCode;
create table if not exists coordonnees (
    bibId smallint not null primary key auto_increment, 
    ccId smallint,
    typeRapport varchar(50),
    avancement varchar(50),
    typologie varchar(50),
    A100 int,
    A101 varchar(100),
    A102 varchar(100),
    A103 varchar(50),
    A104 int,
    A105 varchar(50),
    A106 varchar(100),
    A107 int,
    A108 varchar(100),
    A109 varchar(50),
    A112 int,
    A113 int,
    A114 varchar(100),
    A115 varchar(100),
    A116 varchar(150),
    A121 varchar(50),
    A130 varchar(50),
    A131 varchar(100),
    A132 varchar(100),
    A133 varchar(100),
    A200 int,
    A203 int);

create table if not exists prets (
    bibId int primary key not null,
    bibCode int,
    E201 mediumint,
    E202 mediumint,
    E203 mediumint,
    E204 mediumint,
    E205 mediumint,
    E206 mediumint,
    E207 mediumint,
    E208 mediumint,
    E209 mediumint,
    E210 mediumint,
    E211 mediumint,
    E212 mediumint,
    E213 mediumint,
    E214 mediumint,
    E215 mediumint,
    E216 mediumint,
    E217 mediumint,
    E218 mediumint,
    E219 mediumint,
    E220 mediumint,
    E221 mediumint,
    E222 mediumint,
    E223 mediumint,
    E224 mediumint,
    E225 mediumint,
    E226 mediumint,
    E227 mediumint,
    E228 mediumint,
    E233 mediumint,
    E234 mediumint,
    E235 mediumint,
    E236 mediumint,
    E237 mediumint,
    E238 mediumint,
    E239 mediumint,
    E240 mediumint,
    E241 mediumint,
    E242 mediumint,
    E243 mediumint,
    E245 mediumint,
    E246 mediumint);
    
create table if not exists personnel (
    bibId smallint primary key,
    bibCode int,
    G101 int,
    G102 double,
    G103 smallint,
    G104 float,
    G105 smallint,
    G106 float,
    G111 smallint,
    G112 double,
    G113 smallint,
    G114 smallint,
    G115 float,
    G116 smallint,
    G117 smallint,
    G118 float,
    G119 smallint,
    G120 smallint,
    G121 double,
    G122 smallint,
    G123 smallint,
    G124 double,
    G125 smallint,
    G126 smallint,
    G127 double,
    G128 smallint,
    G129 smallint,
    G130 smallint,
    G131 double,
    G132 double,
    G133 smallint,
    G134 double,
    G135 smallint,
    G136 float,
    G137 float,
    G138 float,
    G139 double,
    G140 double,
    G141 smallint,
    G142 float,
    G143 varchar(5));

create table if not exists budget (
    bibId smallint primary key,
    bibCode int,
    F101 mediumint,
    F102 mediumint,
    F103 mediumint,
    F104 mediumint,
    F105 mediumint,
    F106 mediumint,
    F201 mediumint,
    F202 mediumint,
    F203 mediumint,
    F314 mediumint,
    F401 smallint,
    F402 smallint,
    F403 smallint,
    F501 mediumint,
    F502 mediumint,
    F503 mediumint,
    F504 mediumint,
    F505 mediumint,
    F506 mediumint,
    F507 mediumint,
    F508 mediumint,
    F509 mediumint,
    F510 mediumint,
    F511 mediumint,
    F601 mediumint,
    F602 mediumint,
    F603 mediumint,
    F604 mediumint,
    F605 mediumint,
    F701 mediumint,
    F702 mediumint,
    F703 mediumint,
    F704 mediumint,
    F705 mediumint,
    F706 mediumint,
    F707 mediumint,
    F708 mediumint,
    F709 mediumint,
    F710 mediumint,
    F712 mediumint,
    F713 mediumint,
    F714 mediumint,
    F715 mediumint,
    F716 mediumint,
    F801 varchar(200),
    F802 varchar(200),
    F803 smallint,
    F804 varchar(50),
    F805 varchar(50),
    F806 mediumint,
    F807 varchar(50),
    F808 varchar(50),
    F809 smallint,
    F810 varchar(50),
    F811 varchar(50),
    F812 mediumint,
    F813 varchar(50),
    F814 varchar(50),
    F815 smallint,
    F816 varchar(50),
    F817 varchar(50),
    F818 smallint,
    F819 varchar(50),
    F820 varchar(50),
    F821 smallint,
    F822 varchar(50),
    F823 varchar(50),
    F824 smallint,
    F825 varchar(50),
    F826 varchar(50),
    F827 smallint);

create table if not exists usagers(
    bibId smallint primary key,
    bibcode int,
    E101 smallint,
    E102 smallint,
    E103 smallint,
    E104 smallint,
    E105 smallint,
    E106 smallint,
    E107 smallint,
    E108 smallint,
    E109 smallint,
    E110 smallint,
    E111 smallint,
    E112 smallint,
    E113 smallint,
    E114 smallint,
    E115 smallint,
    E116 smallint,
    E117 smallint,
    E118 smallint,
    E119 smallint,
    E120 smallint,
    E121 smallint,
    E122 smallint,
    E123 smallint,
    E124 smallint,
    E125 smallint,
    E126 smallint,
    E127 smallint,
    E128 smallint,
    E129 smallint,
    E130 smallint,
    E131 smallint,
    E132 smallint,
    E133 smallint,
    E134 smallint,
    E135 smallint,
    E136 smallint,
    E137 smallint,
    E138 smallint,
    E139 smallint,
    E140 smallint,
    E141 smallint,
    E142 smallint,
    E143 smallint,
    E144 smallint,
    E145 smallint,
    E146 smallint,
    E147 mediumint);

create table if not exists acces(
    bibId smallint primary key,
    bibCode int,
    C101 smallint,
    C102 smallint,
    C103 smallint,
    C104 smallint,
    C105 smallint,
    C106 smallint,
    C107 smallint,
    C108 smallint,
    C109 smallint,
    C110 smallint,
    C112 smallint,
    C114 varchar(5),
    C115 smallint,
    C116 varchar(5),
    C117 smallint,
    C118 smallint,
    C119 smallint,
    C120 varchar(5),
    C121 smallint,
    C201 varchar(5),
    C202 mediumint,
    C203 mediumint,
    C204 mediumint,
    C205 mediumint,
    C206 text,
    C301 smallint,
    C302 smallint,
    C303 smallint,
    C304 smallint,
    C305 smallint,
    C306 smallint,
    C309 varchar(5),
    C310 text);

create table if not exists docs (
    bibId smallint primary key,
    D101 mediumint,
    D102 mediumint,
    D103 mediumint,
    D104 mediumint,
    D105 mediumint,
    D106 mediumint,
    D107 mediumint,
    D108 mediumint,
    D116 mediumint,
    D117 mediumint,
    D118 mediumint,
    D119 mediumint,
    D120 mediumint,
    D121 mediumint,
    D128 mediumint,
    D129 mediumint,
    D130 mediumint,
    D131 mediumint,
    D132 mediumint,
    D133 mediumint,
    D134 mediumint,
    D142 mediumint,
    D143 mediumint,
    D144 mediumint,
    D201 mediumint,
    D202 mediumint,
    D203 mediumint,
    D204 mediumint,
    D211 mediumint,
    D301 mediumint,
    D302 mediumint,
    D303 mediumint,
    D304 mediumint,
    D305 mediumint,
    D306 mediumint,
    D307 mediumint,
    D308 mediumint,
    D309 mediumint,
    D310 mediumint,
    D311 mediumint,
    D312 mediumint,
    D313 mediumint,
    D314 mediumint,
    D315 mediumint,
    D316 mediumint,
    D317 mediumint,
    D318 mediumint,
    D319 mediumint,
    D320 mediumint,
    D321 mediumint,
    D322 mediumint,
    D401 mediumint,
    D402 mediumint,
    D405 mediumint,
    D406 mediumint,
    D409 mediumint,
    D410 mediumint,
    D411 mediumint,
    D412 mediumint,
    D416 mediumint,
    D417 mediumint,
    D418 mediumint,
    D419 mediumint,
    D420 mediumint,
    D421 mediumint,
    D422 mediumint,
    D423 mediumint,
    D424 mediumint,
    D425 mediumint,
    D426 mediumint,
    D427 mediumint,
    D428 mediumint,
    D429 mediumint,
    D430 mediumint,
    D431 mediumint,
    D432 mediumint,
    D433 mediumint,
    D434 mediumint,
    D435 mediumint,
    D436 mediumint,
    D437 mediumint,
    D438 mediumint,
    D439 mediumint,
    D440 mediumint,
    D441 mediumint,
    D442 mediumint,
    D443 mediumint,
    D444 mediumint,
    D445 mediumint,
    D446 mediumint,
    D447 mediumint,
    D448 mediumint,
    D520 varchar(150),
    D521 varchar(150),
    D522 varchar(150),
    D523 varchar(150),
    D524 varchar(150),
    D525 varchar(150),
    D526 varchar(150),
    D527 varchar(150),
    D528 varchar(150),
    D529 varchar(150),
    D530 varchar(150),
    D531 varchar(150),
    D532 varchar(150),
    D533 varchar(150),
    D534 varchar(150),
    D535 varchar(150),
    D536 varchar(150),
    D537 varchar(150),
    D538 varchar(150),
    D539 varchar(150),
    D540 smallint,
    D541 varchar(150),
    D542 varchar(150),
    D543 smallint,
    D544 varchar(150),
    D545 varchar(150),
    D546 smallint,
    D547 varchar(150),
    D548 varchar(150),
    D549 smallint,
    D550 varchar(150),
    D601 varchar(150),
    D602 varchar(150),
    D604 smallint,
    D611 varchar(150),
    D613 smallint,
    D614 varchar(150),
    D616 smallint,
    D620 varchar(150),
    D622 smallint,
    D623 varchar(150),
    D625 smallint,
    D626 varchar(150),
    D628 smallint,
    D701 varchar(150),
    D702 varchar(150),
    D703 varchar(150),
    D704 varchar(150),
    D705 varchar(150),
    D706 varchar(150),
    D707 varchar(150),
    D708 varchar(150),
    D709 varchar(150));